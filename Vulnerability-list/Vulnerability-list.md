# 新学期的开始，总是需要整理大量的资料。Vulnerability-list，漏洞列表。
 - 漏洞整理基于seebug的漏洞分类整理（https://www.seebug.org/category/）

## HTTP Parameter Pollution（HTTP参数污染）HPP
描述：https://www.owasp.org/index.php/Testing_for_HTTP_Parameter_pollution_(OTG-INPVAL-004)
原理：与客户端进行交互是，客户端在GET/POST中带有参数，参数以名称——值的形式出现，一般而言不会出现重名的参数，但是在HTTP协议中允许相同的参数出现多次。
不同的web服务器对相同2个参数的请求解析不一样。
```sh
PHP / Apache  PHP / Zeus  IBM Lotus Domino 解析后者
JSP, Servlet / Apache Tomcat Perl(CGI)/Apache 解析前者
Python/Apache ASP.NET / IIS  ASP / IIS  解析ALL
```
```sh
案例：
缺陷编号： WooYun-2015-120718 
漏洞标题： 京东某站由HTTP parameter pollution导致的XSS跨站(绕过chrome 的filter) 
相关厂商：  京东商城  
漏洞作者： 大物期末不能挂
parameter：courseName http://xue.jd.com/ondemandCourse/queryOndemandCoursePage.action?classifyId=&courseLable=%25E6%258E%25A8%25E5%25B9%25BF&courseName=123&courseName=12%22%3E%3Cscript%3Ealert(1)%3C/script%3E%3Ca%20herf=%22&flag=1
```
 - 利用方式：1.绕过WAF 2.XSS 3.SQL注入
 
## 后门
后门主要是指绕过安全控制程序而获取对目标的控制权。个人将其分为web后门、硬件后门、移动程序后门。
- web程序后门一般而言均是hacker在取得网站控制权时为了下次访问而上传的后门脚本,或hacker开启的ssh后门。
- 硬件后门常发现的与路由器、防火墙、PLC （可编程控制器）中。
- ios端和android端，主要实现1.录音和截屏2.上传GPS信息3.增删改查app数据4.读写app的钥匙链5.发送数据到服务器6.利用URL schemes打开其他app或者网页7.安装企业应用

## cookie
 - cookie基本了解：cookie是某些网站为了辨别用户身份、进行session跟踪而储存在用户本地终端上的数据；用于保持http会话状态；由服务器或是js脚本写入；保存在用户本地（浏览器），由http头传输；cookie由path（path表示cookie所在的目录，cookie是面向路径的），name，domain（表示cookie面向的域）组成。
 - cookie与SOP（同源策略，同源策略的目的是防止某个文档或是脚本从多个不同的源进行装载，“同源”指的是同协议、同域名、同端口）：某网站地址为www.xxxxxx.com，我们可以设置cookie的域范围为www.xxxxxxcom，同时又设置window.domain=xxxxxx.com，这样就可以让xxx.xxxxxx.com与www.xxxxx.com同源，于是我们可以通过同源策略可以获取到www.leesec.com的cookie。
 - cookie注入：cookie和传统的sql注入原理是一样的都是针对数据库的攻击，只是提交方式和表现方式不同，服务器在获取客户端提交的数据是，没有对以request.cookie(参数)方式提交的数据进行过滤。
 - cookie导致xss：cookie参数过滤不完全，导致某些参数可以被加入恶意代码。
 - cookie重名替换，cookie对于两个相同name的cookie没有规定谁是有效的，这样也可以导致attacker精确的替换正常的cookie来实现精确的攻击。
 - 隐式验证：从第三方web页面发起对当前网站域下的请求，改请求也会带上当前网站的cookie。改缺陷可以导致CSRF攻击。
 - 推荐 作者：走马 的 《cookie之困》 https://github.com/knownsec/KCon/blob/master/2015/Cookie%20%E4%B9%8B%E5%9B%B0.pdf

## 跨站请求伪造
 - CSRF（Cross—Site Request Forgery跨站请求伪造），CSRF被称为“沉睡的巨人”。
 - CSRF原理：CSRF攻击可以劫持终端用户在已登陆的web站点执行非本意（恶意）操作。CSRF产生原因：1.开发者不够谨慎，编写的web程序存在漏洞导致被恶意利用；2.因为web浏览器对cookie和HTTP身份验证等会话信息的处理存在一定的缺陷。
 - example：在例子中的代码情况下，攻击者只需要构造一个特定的url，如：http://www.xxxxxx.com/transfer.php?id=1&money=1000,只要用户点击了这个连接，恶意代码就会利用用户发送一个u请求执行CSRF，银行卡就会向账号为1的账号转帐1000元。这个案例成功的原因是开发者滥用￥-REQUEST方法，导致本来的POST可以使用GET方式进行实现。
```sh
<foem action= "transfer.php" method="post">
      交易账号<input type="text" name="id"/><br>
      金额    <input type="text" name="money"/><br>
      <input type="submit" value="提交"/>
</form>
```
 - 几种常见的CSRF方式：<img>标签属性，<script>标签属性，<iframe>标签属性，Image对象（javascript），XMLHTTP（javascript），带有src属性的http标签都可以跨域发起GET请求。
 - CSRF攻击方式 1.HTTP-CSRF,即利用HTML元素发出GET请求（带src属性的HTML标签都可以跨域发起GET请求），若要构造POST请求，则必须用表单提交的方式。2.JSON HiJacking攻击:json以HHTTP方式供外网访问，如果使用浏览器打开，json数据就相当于一个普通的HTTP页面，如果其中包含恶意代码就会产生安全问题。
 - CSRF防御，1.验证Referer；2.使用验证码；3.使用CSRF token；4.限制Session生命周期。

